<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="resources/css/bootstrap.3.3.6.min.css">
<link rel="stylesheet" href="resources/css/bootstrap-datetimepicker.css">
<link rel="stylesheet" href="resources/css/fontawesome.all.css">
<link rel="stylesheet" href="resources/css/style.css">
<script type="text/javascript" src="resources/js/jquery-2.2.4.min.js"></script></script>
<script type="text/javascript" src="resources/js/bootstrap.3.3.6.min.js"></script>
<script type="text/javascript" src="resources/js/moment.min.js"></script>
<script type="text/javascript" src="resources/js/moment-timezone.min.js"></script>
<script type="text/javascript" src="resources/js/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="resources/js/brightspace.js"></script>    
<script type="text/javascript">
let match = window.top.location.href.match(/\/navbars\/(\d+)\//);
let ORG_UNIT_ID = match[1];
</script>
</head>
<body class="content" role="document">
	<div class="container-fluid">
		<main>
            <div class="row" id="existing_timeslots">
                <div class="col-xs-12">
                    <h1 id="schedule_title"></h1>
                    <p id="expiry_date"></p>
                    <p id="schedule_description"></p>
                    <p id="download_schedule"><input type="button" class="btn btn-primary btn-sm" value="Export Schedule for Grading" onclick="downloadSchedule()" />
                    Delete the first 4 columns from the CSV file before Importing to the Gradebook.</p>
                    <h2 id="existing_timeslots__heading">Available timeslots</h2>
                    <p id="autofill_group_registration"><button id="autofill_group_registration__buton" type="button" class="button">Populate timeslot registrations based on "<span id="associated_group_category_name"></span>"</button></p>
                    <table class="d2l-table" id="existing_timeslots__table">
                    </table>
                </div>
            </div>
            <form id="signup_schedule__form" method="post" onsubmit="event.preventDefault(); return submitForm();" action="./">
                <div class="row">
                    <div class="col-xs-12 create_title__div">
                        <h1 id="form_title">Signup Schedule</h1>
                        <div>
                            <label id="edit_title" for="title">
                                <h2>Signup Schedule Title</h2>
                                <p>Title of the schedule</p>
                                <p><input type="text" name="title" id="title"  class="form-control" required onchange="updateEventTitle(this)" /></p>
                            </label>
                        </div>
                        <div>
                            <label id="edit_event_title" for="event_title">
                                <h2>Calendar Event Title</h2>
                                <p>This title will appear in your students' calendar for this event</p>
                                <p><input type="text" name="event_title" id="event_title"  class="form-control" required /></p>
                            </label>
                        </div>
                        <div>
                            <label id="edit_description" for="description">
                                <h2>Description</h2>
                                <p>Description of the schedule</p>
                                <p><textarea name="description" id="description" class="form-control"></textarea></p>
                            </label>
                        </div>
                        <div id="module_selection">
                            <label for="module__select">
                                <h2>Module Selection</h2>
                                <p>Select the module that this schedule will be added to</p>
                                <select id="module__select" class="form-control"></select>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <h2>Automatic De-registration After Timeslot has Passed</h2>
                        <p>Select whether the student will be automatically deregistered after their timeslot selection has passed. This is useful for recurring events.</p>
                        <p class="vertical-align">
                            <input type="radio" name="re_register" id="re_register_no" value="no" checked /><label for="re_register_no" class="inline">No</label>
                            <br>
                            <input type="radio" name="re_register" id="re_register_yes" value="yes" /><label for="re_register_yes" class="inline">Yes</label>
                        </p>
                        <p>Note: Students can still only be in one timeslot at a time. You will not get a record of previous registrations.</p>
                    </div>
                </div>
                <div id="edit_timeblocks">
                    <div class="row">
                        <div class="col-xs-12">
                            <h2>Range of dates and times</h2>
                        </div>
                    </div>
                    <div class="datetime__div" id="datetime_1">
                        <div class="row">
                            <div class="col-xs-12">
                                <h3 class="datetime_title"><span>Date & Time 1</span> <button type="button" class="btn btn-remove btn-red btn-sm" data-counter="1">Remove</button></h3>
                                <h4>Type: </h4>
                                <p class="vertical-align">
                                    <input class="timeslottype timeslottype_single_input" id="timeslottype_single_1" type="radio" name="timeslottype_1" value="single" checked /><label class="timeslottype_single_label inline" for="timeslottype_single_1">Single</label>
                                    <br>
                                    <input class="timeslottype timeslottype_recurring_input" id="timeslottype_recurring_1" type="radio" name="timeslottype_1" value="recurring" /><label class="timeslottype_recurring_label inline" for="timeslottype_recurring_1">Recurring</label>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-sm-6 col-xs-12 startdate">
                                <label for="date_1" class="startdate_label">
                                    <p>Date</p>
                                </label>
                                <p><input type="text" name="date_1" id="date_1" class="form-control date_input startdate_input timeblock_datetime_input" required /></p>
                            </div>
                            <div class="col col-sm-3 col-xs-12 enddate">
                                <label for="enddate_1" class="endate_label">
                                    <p>End Date</p>
                                </label>
                                <p><input type="text" name="enddate_1" id="enddate_1" class="form-control date_input enddate_input timeblock_datetime_input" required /></p>                               
                            </div>
                            <div class="col col-sm-3 col-xs-6">
                                <label for="starttime_1" class="starttime_label">
                                    <p>Start Time</p>
                                </label>
                                <p><select name="starttime_1" id="starttime_1" class="form-control starttime_input timeblock_datetime_input" required></select></p>
                            </div>
                            <div class="col col-sm-3 col-xs-6">
                                <label for="endtime_1" class="endtime_label">
                                    <p>End Time</p>
                                </label>
                                <p><select name="endtime_1" id="endtime_1" class="form-control endtime_input timeblock_datetime_input" required></select></p>
                            </div>
                        </div>
                        <div class="row day_checkboxes">
                            <div class="col-xs-1 col-sm-12">
                                <h4>Days:</h4>
                                <p class="flex-parent">
                                    <span class="vertical-align"><input id="monday_1" type="checkbox" name="monday_1" class="day_of_week day_of_week__1" /><label class="monday_label inline" for="monday_1">Monday </label></span>
                                    <span class="vertical-align"><input id="tuesday_1" type="checkbox" name="tuesday_1" class="day_of_week day_of_week__2" /><label class="tuesday_label inline" for="tuesday_1">Tuesday </label></span>
                                    <span class="vertical-align"><input id="wednesday_1" type="checkbox" name="wednesday_1" class="day_of_week day_of_week__3" /><label class="wednesday_label inline" for="wednesday_1">Wednesday </label></span>
                                    <span class="vertical-align"><input id="thursday_1" type="checkbox" name="thursday_1" class="day_of_week day_of_week__4" /><label class="thursday_label inline" for="thursday_1">Thursday </label></span>
                                    <span class="vertical-align"><input id="friday_1" type="checkbox" name="friday_1" class="day_of_week day_of_week__5" /><label class="friday_label inline" for="friday_1">Friday </label></span>
                                    <span class="vertical-align">
                                        <input id="saturday_1" type="checkbox" name="saturday_1" class="day_of_week day_of_week__6" /><label class="saturday_label inline" for="saturday_1">Saturday </label>
                                        <input id="sunday_1" type="checkbox" name="sunday_1" class="day_of_week day_of_week__0" /><label class="sunday_label inline" for="sunday_1">Sunday </label>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <p><input type="button" class="btn btn-secondary" value="Add another date &amp; time range" onclick="addDatetime()"/></p>
                            <h3 id="total_time">Total time: 3 hours</h3>                        
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <label for="timeslot_duration">
                                <h2>Set the duration of each timeslot</h2>
                                <p>The length of each timeslot in minutes</p>
                                <p><input type="text" name="timeslot_duration" id="timeslot_duration" class="form-control" value="30" /></p>
                            </label>
                            <h3 id="total_timeslots">This will create 2 timeslots of 30 minutes each.</h3>
                        </div>
                    </div>
                </div>
                <div class="row" id="max_users__row">
                    <div class="col-xs-12">
                        <label for="max_users">
                            <h2>Set the number of students per timeslot (group size)</h2>
                            <p>Maximum number of students per timeslot</p>
                            <p><input type="number" name="max_users" id="max_users" class="form-control" value="1" /></p>
                        </label>
                        <label for="associated_group_category" id="associated_group_category__label">
                            <h2>Join timeslot groups to existing groups (optional)</h2>
                            <p>If one member of a group picks a timeslot, all the other members of that group must pick the same timeslot</p>
                            <p><select name="associated_group_category" id="associated_group_category" class="form-control">
                                <option value="">Unrestricted</option>
                            </select></p>
                        </label>
                    </div>
                </div>

                <div class="row" id="enddate__row">
                    <div class="col-xs-12">
                        <label for="schedule_enddate">
                            <h2>Set signup end-date</h2>
                            <p>Last day for signup: (optional) </p>
                            <p><input type="text" name="schedule_enddate" id="schedule_enddate" class="form-control date_input" /></p>
                        </label>
                    </div>
                </div>

                <div class="row" id="add_new_timeblocks">
                    <div class="col-xs-12">
                        <p><input type="button" class="btn btn-secondary" value="Add another date &amp; time range" onclick="$('#add_new_timeblocks').hide(); addDatetime()"/></p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <p><br><input id="save" type="submit" class="btn btn-primary" value="Save" /></p>
                    </div>
                </div>                
            </form>
            <div class="row" id="edit_schedule">
                <div class="col-sm-2 col-xs-6">
                    <p><br><input type="button" class="btn btn-primary" value="Edit Schedule" onclick="$('#edit_schedule').hide(); $('#signup_schedule__form').show();" /></p>
                </div>
                <div id="delete_schedule" class="col-sm-offset-6 col-sm-4 col-xs-6">
                    <p><br><input type="button" class="btn btn-red" value="DELETE SCHEDULE" onclick="confirmDeleteSchedule()" />&nbsp;</p>
                </div>
            </div>
		</main>
	</div>
<script type="text/javascript" src="resources/js/config.js"></script>
<script type="text/javascript" src="resources/js/main.js"></script>
<script type="text/javascript" src="resources/js/setup.js"></script>
</body>
</html>